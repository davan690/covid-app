{"ast":null,"code":"var _jsxFileName = \"/Users/khoa/Dropbox/Websites/covid19/covid-app/client/src/components/Chart.js\";\nimport React, { Component } from 'react';\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\n\nrequire(\"highcharts/modules/exporting\")(Highcharts);\n\nrequire(\"highcharts/modules/data\")(Highcharts);\n\nexport default class Chart extends Component {\n  constructor(props) {\n    super(props);\n    this.chartComponent = React.createRef();\n  }\n\n  componentDidMount() {\n    const container = this.chartComponent.current.container.current;\n    container.style.height = \"100%\";\n    container.style.width = \"100%\";\n    this.chartComponent.current.chart.reflow();\n  }\n\n  render() {\n    const {\n      newly_infected,\n      resources,\n      measureWeeks,\n      dates\n    } = this.props;\n    const {\n      numHospBeds,\n      numICUBeds,\n      numVents\n    } = resources;\n    console.log(dates.length);\n    console.log(newly_infected.length); // Compute weeks\n\n    const [doNothing, socDist, relaxedLD, sigLD, critLD] = measureWeeks;\n    const data = dates.map((dateString, index) => {\n      var dateArray = dateString.split(\"-\").map(Number);\n      dateArray[1] -= 1;\n      const date = Date.UTC(dateArray[0], dateArray[1], dateArray[2]);\n      return [date, newly_infected[index]];\n    });\n    var indx = 0;\n    var measureDates = [];\n\n    if (dates[0]) {\n      measureDates.push(data[0][0]);\n      measureWeeks.forEach(int_len => {\n        indx += Math.trunc(Math.round(int_len * 7 / 4));\n\n        if (indx > dates.length) {\n          indx = dates.length;\n        }\n\n        measureDates.push(data[indx ? indx - 1 : indx][0]);\n      });\n    }\n\n    const [startDoNothing, startSocDist, startRelaxedLD, startSigLD, startCritLD, endCritLD] = measureDates;\n    const options = {\n      chart: {\n        backgroundColor: '#fefefa',\n        type: 'line'\n      },\n      title: {\n        text: 'Newly Infected Over Time'\n      },\n      // data: {\n      //     googleSpreadsheetKey: '12Ldo5cwQMCu1Aka2p0nCCvajjYlXQ_ags1OtwHOyKeM'\n      // },\n      xAxis: {\n        type: 'datetime',\n        plotBands: [{\n          color: doNothing ? 'rgba(210,108,103,0.2)' : 'rgba(255,255,255,0)',\n          from: startDoNothing,\n          to: startSocDist // label: {\n          //     text: doNothing ? 'Do Nothing' : '',\n          //     align: 'center'\n          // }\n\n        }, {\n          color: socDist ? 'rgba(223,156,153,0.2)' : 'rgba(255,255,255,0)',\n          from: startSocDist,\n          to: startRelaxedLD // label: {\n          //     text: socDist ? 'Social Distancing': '',\n          //     align: 'center'\n          // }\n\n        }, {\n          color: relaxedLD ? 'rgba(251,230,159,0.2)' : 'rgba(255,255,255,0)',\n          from: startRelaxedLD,\n          to: startSigLD // label: {\n          //     text: relaxedLD ? 'Relaxed Lockdown' : '',\n          //     align: 'center'\n          // }\n\n        }, {\n          color: sigLD ? 'rgba(189,214,171,0.2)' : 'rgba(255,255,255,0)',\n          from: startSigLD,\n          to: startCritLD // label: {\n          //     text: sigLD ? 'Significant Lockdown' : '',\n          //     align: 'center'\n          // }\n\n        }, {\n          color: critLD ? 'rgba(156,195,129,0.2)' : 'rgba(255,255,255,0)',\n          from: startCritLD,\n          to: endCritLD // label: {\n          //     text: critLD ? 'Critical Lockdown' : '',\n          //     align: 'center'\n          // }\n\n        }]\n      },\n      yAxis: {\n        title: {\n          text: 'Newly Infected'\n        },\n        plotLines: [{\n          color: 'black',\n          // Color value\n          //   dashStyle: 'longdashdot', // Style of the plot line. Default to solid\n          value: numHospBeds,\n          // Value of where the line will appear\n          width: 1,\n          // Width of the line    \n          label: {\n            text: 'Number of Hospital Beds',\n            // Content of the label. \n            align: 'left' // Positioning of the label. \n            // Default to center. x: +10 // Amount of pixels the label will be repositioned according to the alignment. \n\n          }\n        }, {\n          color: 'red',\n          // Color value\n          //   dashStyle: 'longdashdot', // Style of the plot line. Default to solid\n          value: numICUBeds,\n          // Value of where the line will appear\n          width: 1,\n          // Width of the line    \n          label: {\n            text: 'Number of ICU Beds',\n            // Content of the label. \n            align: 'left' // Positioning of the label. \n            // Default to center. x: +10 // Amount of pixels the label will be repositioned according to the alignment. \n\n          }\n        }, {\n          color: 'blue',\n          // Color value\n          //   dashStyle: 'longdashdot', // Style of the plot line. Default to solid\n          value: numVents,\n          // Value of where the line will appear\n          width: 1,\n          // Width of the line    \n          label: {\n            text: 'Number of Ventilators',\n            // Content of the label. \n            align: 'right' // Positioning of the label. \n            // Default to center. x: +10 // Amount of pixels the label will be repositioned according to the alignment. \n\n          }\n        }]\n      },\n      plotOptions: {\n        series: {\n          marker: {\n            enabled: false\n          }\n        }\n      },\n      series: [{\n        name: \"Newly Infected\",\n        data: data\n      }]\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"100%\",\n        height: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(HighchartsReact, {\n      highcharts: Highcharts,\n      options: options,\n      ref: this.chartComponent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/khoa/Dropbox/Websites/covid19/covid-app/client/src/components/Chart.js"],"names":["React","Component","Highcharts","HighchartsReact","require","Chart","constructor","props","chartComponent","createRef","componentDidMount","container","current","style","height","width","chart","reflow","render","newly_infected","resources","measureWeeks","dates","numHospBeds","numICUBeds","numVents","console","log","length","doNothing","socDist","relaxedLD","sigLD","critLD","data","map","dateString","index","dateArray","split","Number","date","Date","UTC","indx","measureDates","push","forEach","int_len","Math","trunc","round","startDoNothing","startSocDist","startRelaxedLD","startSigLD","startCritLD","endCritLD","options","backgroundColor","type","title","text","xAxis","plotBands","color","from","to","yAxis","plotLines","value","label","align","plotOptions","series","marker","enabled","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Highcharts from 'highcharts';\r\nimport HighchartsReact from 'highcharts-react-official';\r\nrequire(\"highcharts/modules/exporting\")(Highcharts);\r\nrequire(\"highcharts/modules/data\")(Highcharts);\r\n\r\nexport default class Chart extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.chartComponent = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n      const container = this.chartComponent.current.container.current;\r\n  \r\n      container.style.height = \"100%\";\r\n      container.style.width = \"100%\";\r\n      this.chartComponent.current.chart.reflow();\r\n    }\r\n\r\n    render() {\r\n        const { newly_infected, resources, measureWeeks, dates } = this.props;\r\n        const { numHospBeds, numICUBeds, numVents } = resources;\r\n        console.log(dates.length);\r\n        console.log(newly_infected.length);\r\n        \r\n        // Compute weeks\r\n        const [ doNothing, socDist, relaxedLD, sigLD, critLD ] = measureWeeks;\r\n        \r\n        const data = dates.map((dateString, index) => {\r\n            var dateArray = dateString.split(\"-\").map(Number);\r\n            dateArray[1] -= 1;\r\n            const date = Date.UTC(dateArray[0], dateArray[1], dateArray[2]);\r\n            return [date, newly_infected[index]];\r\n        });\r\n\r\n        var indx = 0;\r\n        var measureDates = [];\r\n        if (dates[0]) {\r\n            measureDates.push(data[0][0]);\r\n            measureWeeks.forEach((int_len) => {\r\n                indx += Math.trunc(Math.round(int_len * 7 / 4));\r\n                if (indx > dates.length){\r\n                    indx = dates.length;\r\n                } \r\n                measureDates.push(data[indx ? indx-1: indx][0]);\r\n            })\r\n        }\r\n        const [ startDoNothing, startSocDist, startRelaxedLD, startSigLD, startCritLD, endCritLD ] = measureDates;\r\n\r\n        const options = {\r\n            chart: {\r\n                backgroundColor: '#fefefa',\r\n                type: 'line'\r\n            },\r\n            title: {\r\n                text: 'Newly Infected Over Time'\r\n            },\r\n            // data: {\r\n            //     googleSpreadsheetKey: '12Ldo5cwQMCu1Aka2p0nCCvajjYlXQ_ags1OtwHOyKeM'\r\n            // },\r\n            xAxis: {\r\n                type: 'datetime',\r\n                plotBands: [{\r\n                    color: doNothing ? 'rgba(210,108,103,0.2)' : 'rgba(255,255,255,0)',\r\n                    from: startDoNothing,\r\n                    to: startSocDist,\r\n                    // label: {\r\n                    //     text: doNothing ? 'Do Nothing' : '',\r\n                    //     align: 'center'\r\n                    // }\r\n                }, {\r\n                    color: socDist ? 'rgba(223,156,153,0.2)' : 'rgba(255,255,255,0)',\r\n                    from: startSocDist,\r\n                    to: startRelaxedLD,\r\n                    // label: {\r\n                    //     text: socDist ? 'Social Distancing': '',\r\n                    //     align: 'center'\r\n                    // }\r\n                }, {\r\n                    color: relaxedLD ? 'rgba(251,230,159,0.2)' : 'rgba(255,255,255,0)',\r\n                    from: startRelaxedLD,\r\n                    to: startSigLD,\r\n                    // label: {\r\n                    //     text: relaxedLD ? 'Relaxed Lockdown' : '',\r\n                    //     align: 'center'\r\n                    // }\r\n                }, {\r\n                    color: sigLD ? 'rgba(189,214,171,0.2)' : 'rgba(255,255,255,0)',\r\n                    from: startSigLD,\r\n                    to: startCritLD,\r\n                    // label: {\r\n                    //     text: sigLD ? 'Significant Lockdown' : '',\r\n                    //     align: 'center'\r\n                    // }\r\n                }, {\r\n                    color: critLD ? 'rgba(156,195,129,0.2)' : 'rgba(255,255,255,0)',\r\n                    from: startCritLD,\r\n                    to: endCritLD,\r\n                    // label: {\r\n                    //     text: critLD ? 'Critical Lockdown' : '',\r\n                    //     align: 'center'\r\n                    // }\r\n                }]\r\n\r\n            },\r\n            yAxis: {\r\n                title: {\r\n                    text: 'Newly Infected'\r\n                },\r\n                plotLines: [{\r\n                    color: 'black', // Color value\r\n                    //   dashStyle: 'longdashdot', // Style of the plot line. Default to solid\r\n                    value: numHospBeds, // Value of where the line will appear\r\n                    width: 1, // Width of the line    \r\n                    label: { \r\n                        text: 'Number of Hospital Beds', // Content of the label. \r\n                        align: 'left', // Positioning of the label. \r\n                    // Default to center. x: +10 // Amount of pixels the label will be repositioned according to the alignment. \r\n                    }\r\n                }, {\r\n                    color: 'red', // Color value\r\n                    //   dashStyle: 'longdashdot', // Style of the plot line. Default to solid\r\n                    value: numICUBeds, // Value of where the line will appear\r\n                    width: 1, // Width of the line    \r\n                    label: { \r\n                        text: 'Number of ICU Beds', // Content of the label. \r\n                        align: 'left', // Positioning of the label. \r\n                    // Default to center. x: +10 // Amount of pixels the label will be repositioned according to the alignment. \r\n                    }\r\n                }, {\r\n                    color: 'blue', // Color value\r\n                    //   dashStyle: 'longdashdot', // Style of the plot line. Default to solid\r\n                    value: numVents, // Value of where the line will appear\r\n                    width: 1, // Width of the line    \r\n                    label: { \r\n                        text: 'Number of Ventilators', // Content of the label. \r\n                        align: 'right', // Positioning of the label. \r\n                    // Default to center. x: +10 // Amount of pixels the label will be repositioned according to the alignment. \r\n                    }\r\n                }]\r\n            },\r\n            plotOptions: {\r\n                series: {\r\n                    marker: {\r\n                        enabled: false\r\n                    }\r\n                }\r\n            },\r\n            series: [{\r\n                name: \"Newly Infected\",\r\n                data: data\r\n            }]\r\n        };\r\n\r\n        return (\r\n            <div style={{ width: \"100%\", height: \"100%\" }}>\r\n                <HighchartsReact highcharts={Highcharts} options={options} ref={this.chartComponent}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}